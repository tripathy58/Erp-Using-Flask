<!doctype html>
<html lang="en" class="h-100">
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Inventory</title>
<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/icon.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/main.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/style.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/form.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/popup.css')}}">
<link rel="shortcut icon" href="{{ url_for('static', filename='images/babu.jpg') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css"/>


<style>
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
.modal-content {
       background-color: #fff;
       margin: auto;
       padding: 10px;
       border: 3px solid rgb(51, 90, 218);
       border-radius: 10px;
       width: 50%;
   }
.search{
	height: 30px;
	width: 12%;
	border: 3px solid blue;
	border-radius: 5px;
	margin-right: 10px;
	margin-bottom: -180px;
}

	</style>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<body class="overlay-scrollbar">
	<!-- ############  nav_sidemodal ############# -->
	   {% include 'Nav_sidemodal.html' %}
		<!-- ############ End  nav_sidemodal ############# -->

	<div class="wrapper">

		<div class="head-title">
			<div class="left">
				<h1>Inventory</h1>
			</div>
			<a onclick="document.getElementById('id02').style.display='block'" class="btn-download">
				<!-- <i class='bx bxs-cloud-download' ></i> -->
				<span class="btn-download">Upload Item</span>
			</a>
		</div>
		<ul class="box-info">
			<li style="background-color: rgb(217, 230, 235);">
				<!-- <i class='bx bxs-stock' ></i> -->
				<span class="text">
					<h3><i style="color: blue;" class="fas fa-rupee"></i> &nbsp; {{stock['total_stock_value']}}</h3>
					<p style="font-weight: 800;">Total Stock Value</p>
				</span>
			</li>
			<li style="background-color: rgb(217, 230, 235);">
				<!-- <i class='bx bxs-group' ></i> -->
				<span class="text">
					<h3>2834</h3>
					<p style="font-weight: 800;">Low Stock</p>
				</span>
			</li>
			<a href="" style="text-decoration: none;">

			<li style="background-color: rgb(217, 230, 235);">
				<!-- <i class='bx bxs-group' ></i> -->
				<span class="text">
					<h3>2834</h3>
					<p style="font-weight: 800;">Excess Stock</p>
				</span>
			</li>
			</a>
			<a href="{{url_for('checkreport')}}" style="text-decoration: none;">
			<li style="background-color: rgb(217, 230, 235);">
				<i class='bx bxs-bar-chart-alt-2' ></i>
				<span class="text">
					<h3>-------</h3>
					<p style="font-weight: 800;">View Payments</p>
				</span>
			</li>
			</a>
		</ul>
		<div class="head-title">
			<div class="left">
				<button type="button" class="btn_One"  id="myBtnn"><i class='bx bxs-plus-circle' style="color: white;"></i>Add Items</button>
				<button type="button" class="btn_One" onclick="document.getElementById('id01').style.display='block'"><i class='bx bxs-up-arrow' style="color: white;"></i>Update Stock</button>
			</div>
<!-- ------------------------------------Update Stock Modal--------------------------------------- -->
			<div id="id01" class="modal">
			  <div class="modal-content">
				<span onclick="document.getElementById('id01').style.display='none'" class="close">&times;</span>
			   <div class="table-responsive">
				<div class="content">
					<form action="http://127.0.0.1:5004/check_upload" method="post" enctype="multipart/form-data">
						<div class="user-upload">
							<div class="input-boxs">
								<label style="color: Blue;">Check No</label>
								<input type="text" name="check_no" placeholder="Enter Check no Here" >
							</div><br>
							<div class="input-boxs">
								<label style="color: Blue;">Upload Image</label>
								<input type="file" name="photo[]" id="fileInput" accept="image/*">
							</div>
						</div>
						<div class="button">
							<input type="submit" value="upload">
						</div>
					</form>
				</div>
			</div>
			  </div>
			</div>
				  <!-- #################   end update stock modal table ################# -->


 <!-- #################    add stock modal table #################
<-- The Modal -->
<div id="myModals" class="modal">
 <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
<div class="content">
	<form action="" method="post">
		<div class="user-details">
			<div class="input-box">
				<span class="details">Item Id *</span>
				<input name="item_id" type="text" placeholder="Item Id *"  required>
			</div>
			<div class="input-box">
				<span class="details">Item Name</span>
				<input  name="item_name" type="text" placeholder="Item Name"  required>
			</div>
			<div class="input-box">
				<span class="details">Item Catagory</span>
				<input name="item_cata" type="text" placeholder="Item Catagory" required>
			</div>
			<div class="input-box">
				<span class="details">Current Stock</span>
				<input name="current_stock" type="text" placeholder="Current Stock" required>
			</div>
			<div class="input-box">
				<span class="details">Price</span>
				<input name="price" type="text" placeholder="Price" required >
			</div>
			<div class="input-box">
				<span class="details">Item Type</span>
				<input name="item_type" type="text" placeholder="Item Type"required >
			</div>
			<div class="input-box">
				<span class="details">Min Stock Level</span>
				<input name="min_stock" type="text" placeholder="Min Stock Level" required>
			</div>
			<div class="input-box">
				<span class="details">Max Stock Level</span>
				<input name="max_stock" type="text" placeholder="Max Stock Level" required>
			</div>
			<div class="input-box">
				<span class="details">Country-Party Code</span>
				<input name="c_party_code" type="text" placeholder="Country-Party Code" required>
			</div>
			<div class="input-box">
				<span class="details">Added On</span>
				<input name="added_on" type="date" placeholder="Country-Party Code" required>
			</div>
			<div class="input-box">
				<span class="details">Tax</span>
				<input name="tax" type="text" placeholder="Tax" required>
			</div>
			<div class="input-box">
				<span class="details">Unit</span>
				<select name="unit" required>
					<option>kg</option>
					<option>Meter</option>
					<option>Per Piece</option>

				</select>
			</div>
		</div>
		<div class="button">
			<input type="submit" value="Add Item" onload="return confirm(' Item Added Successfully. You can view this item in Inventory Section.')">
		</div>
	</form>
</div>
</div>
</div>
      <!-- #################   end add stock modal table ################# -->
		<!-- ------------------------------------ start Upload item --------------------------------------- -->
		<div id="id02" class="modal">
			<div class="modal-content">
				<span onclick="document.getElementById('id02').style.display='none'" class="close">&times;</span>
				<div class="table-responsive">
					<div class="content">
						<form action="http://127.0.0.1:5004/inventory_excel" enctype="multipart/form-data" method="post">
							<div class="user-upload">
								<div class="input-boxs">
									<input name="file" type="file"   >
								</div>
							</div>
							<div class="button">
								<input type="submit" value="Upload Excel Sheet">
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<!-- #################   end upload item table ################# -->

<!-- ##################### add stock script ################# -->
<script>
var modal = document.getElementById("myModals");
var btn = document.getElementById("myBtnn");
var span = document.getElementsByClassName("close")[1]; 
btn.onclick = function() {
  modal.style.display = "block";
}
span.onclick = function() {
  modal.style.display = "none";
}
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
</script>
 <!-- #####################  End  stock script ################# -->
				<input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search By Item Name.." class="search" title="Type in a name">
		</div>
	
			<h1 class="heading" style="color: blue;">Current Stocks</h1>
			<table class="table">
			  	<thead>
					<tr class="body_table">
						<th style="text-align: center;font-size: large;">Item Id</th>
						<th style="text-align: center;font-size: large;">Item Name</th>
						<th style="text-align: center;font-size: large;">Item Catagory</th>

						 <!-- <th>Item Catagory</th>
						<th>Current Stock</th>
						<th>Unit</th>
						<th>Price</th>
						<th>Item Type</th>
						<th>Tax</th>
						<th>Min Stock Level</th>
						<th>Max Stock Level</th>
						<th>Country-Party Code</th>
						<th>Added On</th>
						<th>Delete</th>  -->
					  
					</tr>
				</thead>
				<tbody id="myTable">
					{% for row in table %}
					<tr class="body_table" onclick="location.href='/inventory_table_details/{{row.item_id}}'">
					  <td data-label="Item Id">{{row.item_id}}</td>
					  <td data-label="Item Name">{{row.item_name}}</td>
					  <td data-label="Item Name">{{row.item_cata}}</td>

					  <!-- <td data-label="Item Catagory">{{row.item_cata}}</td>
					  <td data-label="Current Stock">{{row.current_stock}}</td>
					  <td data-label="Unit">{{row.unit}}</td>
					  <td data-label="Price">{{row.price}}</td>
					  <td data-label="Item Type">{{row.item_type}}</td>
					  <td data-label="Tax">{{row.tax}}</td>
					  <td data-label="Min Stock Level">{{row.min_stock}}</td>
					  <td data-label="Max Stock Level">{{row.max_stock}}</td>
					  <td data-label="Country-Party Code">{{row.c_party_code}}</td>
					  <td>{{row.added_on}}</td>
					  <td data-label="Delete"><a href="/delete/{{row.id}}" onclick="return confirm('Are you sure you want to delete {{row.item_name}}')" ><i class="fas fa-trash"></i></a></td>  -->

					</tr>
					<!-- <script>
						function myFunction1() {
						  
						  if (confirm("Are you sure, you want to delete ?")==true) {
							location.href="/delete/{{row.id}}"
						  } else {
							location.href="inventory"
						  }
						  
						}
						</script> -->
					{% endfor %}
					
				</tbody>
				
					


			</table>
		</div>
	</div>
</body>


<script>
	function myFunction() {
		var input, filter, table, tr, td, i, tbody,txtValue;
		input = document.getElementById("myInput");
		filter = input.value.toUpperCase();
		table = document.getElementById("myTable");
		tr = table.getElementsByTagName("tr");
		for (i = 0; i < tr.length; i++) {
			td = tr[i].getElementsByTagName("td")[1];
			
			if (td) {
				txtValue = td.textContent || td.innerText;
				if (txtValue.toUpperCase().indexOf(filter) > -1) {
					tr[i].style.display = "";
				} else {
					tr[i].style.display = "none";
				}
			}
		}
	}
</script>

<!-- <script>
	$(document).ready(function () {
		$("#myInput").on("keyup", function () {
			var value = $(this).val().toLowerCase();
			$("#myTable tr").filter(function () {
				$(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
			});
		});
	});
</script> -->



<script src="{{url_for('static',filename='js/script2.js')}}"></script>
</html>
